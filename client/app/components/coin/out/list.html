<div class="module-gop">
    <ol class="breadcrumb fn-clearfix">
        <li>资产管理</li>
        <!-- <li>{{vm.type.toUpperCase()}}</li> -->
        <li>Withdrawal 提现记录</li>
    </ol>

    <div class="panel panel-warning">
        <div class="panel-body">
            <form class="form-inline ui-form" role="form">
                <div class="form-group ui-input-select">
                    <label for="coinout-type" class="control-label f-12">币种选择：</label>
                    <select class="form-control" ng-model="coinType" ng-change="vm.changeCoinType(coinType)" id="coinout-type">
                        <option ng-bind:value="coin.value" ng-repeat="coin in coinList">{{coin.label}}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="control-label f-12">日期选择：</label>
                    <input type="date" ng-model="beginTime" class="form-control w180" ng-change="vm.changeStartDate(beginTime)">
                    -
                    <input type="date" ng-model="endTime" class="form-control w180" ng-change="vm.changeEndDate(endTime)"
                    ng-disabled="disabledEndDate"
                    min="{{min}}">
                    <!-- <div uib-datepicker ng-model="dt" class="well well-sm" datepicker-options="options"></div> -->
                </div>
                <!-- <div class="form-group ui-input-select">
                    <label for="coinout-id" class="control-label f-12">ID：</label>
                    <input type="text" class="form-control " placeholder="请输入id" ng-model="id" id="coinout-id">
                </div> -->
                <div class="form-group ui-input-select">
                    <label for="coinout-uid" class="control-label f-12">UID：</label>
                    <input type="text" class="form-control " placeholder="请输入uid" ng-model="uId" id="coinout-uid">
                </div>
                <div class="form-group ui-input-select">
                    <label for="coinout-address" class="control-label f-12">地址：</label>
                    <input type="text" class="form-control " placeholder="请输入钱包地址" ng-model="address" id="coinout-address">

                </div>
                <div class="form-group ui-input-select">
                    <label for="coinout-status" class="control-label f-12">状态：</label>
                    <select class="form-control" ng-model="vm.condition.status"
                    id="coinout-status">
                        <option ng-repeat="status in statusList" value="{{status.VALUE}}">{{status.LABEL}}</option>
                    </select>
                    <button type="button"  class="btn btn-primary" ng-click="vm.fetchList()">搜索</button>
                    <button type="button"  class="btn btn-primary" ng-click="vm.download()">导出数据</button>
                </div>
            </form>
            <form action="{{url+'/exchange_manager/withdraw/coin/excelwithdrawCoinQuery'}}" style="display: none;">
                <input type="text" name="{{item.key}}" value="{{item.value}}" ng-repeat="item in vm.urlParam">
                <input type="submit" id="download">
            </form>
        </div>
    </div>

    <div class="ui-box">
        <div class="body-title">
            <div class="b_list">
                <div class="i_block">
                    <p>{{vm.fees.yesterdayFee}} {{coinType}}</p>
                    <p class="tips">昨日手续费数量</p>
                </div>
                <div class="i_block">
                    <p>{{vm.fees.feeSum}} {{coinType}}</p>
                    <p class="tips">累计手续费数量</p>
                </div>
                <div class="i_block feesBtn">
                    <div class="" ng-click="vm.updateFees()">更新</div>
                </div>
            </div>

        </div>
    </div>



    <div class="ui-box">
        <table class="table table-striped table-hover table-bordered">
            <thead>
            <tr>
                <th width="13%">创建于</th>
                <th width="13%">更新于</th>
                <!-- <th width="4%">ID</th> -->
                <th width="4%">UID</th>
                <th width="40%">钱包地址</th>
                <th width="4%">币种</th>
                <th width="13%">数量</th>
                <th width="5%">状态</th>
                <!-- <th width="7%">处理人</th> -->
                <th width="8%">备注</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="item in vm.list" ng-if="vm.isLoading === false && vm.list.length > 0">
                <td>{{$root.moment(item.createDate).utc().utcOffset($root.ZONE).format('YYYY-MM-DD HH:mm:ss')}}</td>
                <td>{{$root.moment(item.updateDate).utc().utcOffset($root.ZONE).format('YYYY-MM-DD HH:mm:ss')}}</td>
                <!-- <td>{{item.id}}</td> -->
                <td ng-click="vm.searchInfo(item.uid)"><a href="javascript:void(0)">{{item.uid}}</a></td>
                <td>{{item.address}}</td>
                <td>{{coinType}}</td>
                <td>{{item.amount}}</td>
                <td ng-class="{
                    orangetradedetail:(item.status=='WAIT'|| item.status=='PROCESSING' || item.status=='UNKNOWN'),
                    greentradedetail:(item.status=='SUCCESS'),
                    purpletradedetail:(item.status=='FAILURE'),
                    redtradedetail:(item.status=='REFUSE')}" >
                    {{item.status | gopOutStatus}}
                </td>
                <!-- <td>
                    <span class="do" ng-if=" item.status=='UNKNOWN'">
                        <span class="refuse pointer" ng-click="vm.confirm(item.id,'refuse')">退回</span>
                    </span>
                    <span class="do" ng-if=" item.status=='WAIT'">
                        <span class="agree pointer" ng-click="vm.confirm(item.id,'agree')">同意</span>
                        <span class="refuse pointer" ng-click="vm.confirm(item.id,'refuse')">拒绝</span>
                    </span>
                    <span>暂时没数据</span>
                </td> -->
                <td>
                    <span>{{item.msg | refuseReasonFilter}}</span>
                </td>
            </tr>
            <tr class="ui-no-data" ng-if="vm.isLoading === false && (vm.list.length === 0||vm.list===null)">
                <td colspan="8">暂无数据</td>
            </tr>
            <tr class="ui-loading" ng-if="vm.isLoading === true">
                <td colspan="8">正在加载，请稍候...</td>
            </tr>
            </tbody>
        </table>

        <div class="ui-pager-box" v-if="vm.totalNum > 0">
            <ul uib-pagination
                previous-text="上一页"
                next-text="下一页"
                first-text="首页"
                last-text="尾页"
                total-items="vm.totalNum"
                ng-model="vm.condition.pageNo"
                max-size="5"
                items-per-page="vm.pageSize || 10"
                align="right"
                class="pagination"
                boundary-links="true"
                ng-change="vm.pageChanged()"
                rotate="false"></ul>
        </div>
    </div>
</div>
