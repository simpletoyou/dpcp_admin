<div class="error-current">
	<div class="m-table-flex">
		<div class="thead">
			<div class="tr">
				<div class="th" style="width:3%"></div>
				<div class="th" style="width: 20%">差错流水号</div>
				<div class="th" style="width: 20%">对账批次号</div>
				<div class="th" style="width: 8%">用户/商户</div>
				<div class="th" style="width: 8%">业务类型</div>
				<div class="th" style="width: 8%">差错类型</div>
				<div class="th" style="width: 8%">差错金额</div>
				<div class="th" style="width: 25%">操作</div>
			</div>
		</div>
		<div class="tbody">
			<div class="item"  ng-repeat="item in vm.list" >
				<div class="tr">
					<!--<div class="td" style="width: 30px">
						<a class="do" href="javascript:;" ng-click="vm.toggleDetail(item)">
							<i class="glyphicon"
							   ng-class="{'glyphicon-plus':(item.showDetail==false),'glyphicon-minus':(item.showDetail==true)}"></i>
						</a>
					</div>
					<div class="td" style="width: 200px">{{item.txNo}}</div>
					<div class="td" style="width: 200px">{{item.batchOutTxNo}}</div>
					<div class="td" style="width: 100px">{{item.accountType+'-'+item.userId}}</div>
					<div class="td" style="width: 100px">{{item.assetType+item.optType}}</div>
					<div class="td" style="width: 100px">{{item.mismtachType}}</div>
					<div class="td" style="width: 100px" ng-if="item.moreAmount!=0">{{'+'+item.moreAmount}}</div>
					<div class="td" style="width: 100px" ng-if="item.lessAmount!=0">{{'-'+item.lessAmount}}</div>
					<div class="td" style="width: 250px" ng-if="item.mismtachType.indexOf('MORE')>-1">1,3</div>
					<div class="td" style="width: 250px" ng-if="item.mismtachType.indexOf('LESS')>-1">2,4</div>
					<div class="td" style="width: 250px" ng-if="item.mismtachType.indexOf('DIFF')>-1">2,3,4</div>-->

					<div class="td" style="width: 3%">
						<a class="do" href="javascript:;" ng-click="vm.toggleDetail(item)">
							<i class="glyphicon"
							   ng-class="{'glyphicon-plus':(item.showDetail==false),'glyphicon-minus':(item.showDetail==true)}"></i>
						</a>
					</div>
					<div class="td" style="width: 20%">{{item.txNo}}</div>
					<div class="td" style="width: 20%">{{item.batchOutTxNo}}</div>
					<div class="td" style="width: 8%">{{item.userId}}</div>
					<div class="td" style="width: 8%">{{item.assetTypeText.name+item.optTypeText}}</div>
					<div class="td" style="width: 8%">{{item.mismtach.name}}</div>
					<div class="td" style="width: 8%">{{item.mismtach.val}}</div>
					<div class="td" style="width: 25%" >
                        <!--<div ng-if="item.moreAmount>0&&item.lessAmount==0">
                            <span class="normal rematch" ng-click="vm.doRematch(item,'rematch')">重新匹配</span>
                            <span class="normal"></span>
                            <span class="normal manual" ng-click="vm.openManualBill(item,'manual')">人工打款</span>
                            <span class="normal"></span>
                        </div>
                        <div ng-if="item.moreAmount==0&&item.lessAmount>0">
                            <span class="normal"></span>
                            <span class="normal mismath" ng-click="vm.openDealMismatch(item,'mismath')">差错处理</span>
                            <span class="normal"></span>
                            <span  class="normal bad" ng-click="vm.openDealBad(item,'bad')">坏账处理</span>
                        </div>
                        <div ng-if="item.moreAmount==0&&item.lessAmount==0">
                            <span class="normal"></span>
                            <span  class="normal mismath" ng-click="vm.openDealMismatch(item,'mismath')">差错处理</span>
                            <span class="normal manual" ng-click="vm.openManualBill(item,'manual')">人工打款</span>
                            <span class="normal bad" ng-click="vm.openDealBad(item,'bad')">坏账处理</span>
                        </div>-->
                        <span class="normal rematch" ng-click="vm.doRematch(item,'rematch')">重新匹配</span>
                        <span class="normal mismath" ng-click="vm.openDealMismatch(item,'mismath')">差错处理</span>
                        <span class="normal manual" ng-if="item.optType=='OUT'" ng-click="vm.openManualBill(item,'manualAdd')">人工打款</span>
                        <span class="normal manual" ng-if="item.optType=='IN'" ng-click="vm.openManualBill(item,'manualReduce')">人工退款</span>
                        <span class="normal bad" ng-click="vm.openDealBad(item,'bad')">坏账处理</span>
                    </div>
				</div>
				<div class="detail" ng-if="item.showDetail==true">
					<div class="detail-box">
						<div class="m-table">
							<table width="100%">
								<thead>
								<tr>
									<th width="10%">来源</th>
									<th width="20%">流水号</th>
								</tr>
								</thead>
								<tbody>
								<tr >
									<td class="gray-bg">平台（源业务）</td>
									<td >{{item.sourOutTxNo}}</td>
								</tr>
								<tr >
									<td class="gray-bg">外部（目标业务）</td>
									<td >{{item.destOutTxNo}}</td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="loading" ng-if="vm.isLoading === false && (!vm.list||vm.list.length === 0)">暂无数据</div>
		<div class="nodata" ng-if="vm.isLoading === true">正在加载，请稍后……</div>
	</div>


	<div class="ui-pager-box" ng-if="vm.totalNum > 0">
		<ul uib-pagination
			previous-text="上一页"
			next-text="下一页"
			first-text="首页"
			last-text="尾页"
			total-items="vm.totalNum"
			ng-model="vm.condition.pageNo"
			max-size="5"
			items-per-page="vm.condition.pageSize || 10"
			align="right"
			class="pagination"
			boundary-links="true"
			ng-change="vm.pageChanged()"
			rotate="false"></ul>
	</div>
</div>